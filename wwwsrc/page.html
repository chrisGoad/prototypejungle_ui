<!DOCTYPE html>
<html lang="en">
<head><meta charset="UTF-8">
<title>Visual Experiments</title>

<meta charset="UTF-8">
<title>Visual Experiments</title>
<style>
	.theGrid {
		display:grid;
		padding-top:10px;
		grid-template-columns:1fr 3fr 1fr;
	}
</style>
</head>
<body style="color:white;font-size:14pt;font-family:arial;background-color:black" >
<script>

const afterLastChar = function (string,chr,strict) {
  let idx = string.lastIndexOf(chr);
  if (idx < 0) {
    return strict?undefined:string;
  }
  return string.substr(idx+1);
}

const extension = function (string) {
  return afterLastChar(string,'.');
}
	
const parseQuerystring = function() {
  let nvpair = {};
  let qs = window.location.search.replace('?','');
  let pairs = qs.split('&');
  pairs.forEach(function(v) {
    let pair = v.split('=');
    if (pair.length>1) {
      nvpair[pair[0]] = pair[1];
    }
  });
  return nvpair;
}
let cWidth;
document.addEventListener('DOMContentLoaded', () => {
  debugger;
	let cWidth =document.documentElement.clientWidth;
	let cHeight =document.documentElement.clientHeight;
  let image = document.images[0];
	let getArgs = parseQuerystring();
	let title = getArgs.title;
	let titleDiv = document.getElementById('titleDiv');
	let imageDiv = document.getElementById('imageDiv');
	let videoDiv = document.getElementById('videoDiv');
	let imageEl =  document.getElementById('theImage');
	let videoEl =  document.getElementById('theVideo');
	titleDiv.innerHTML = decodeURI(title);
	imageEl.width = 0.9*Math.min(cWidth,cHeight);
	let im = getArgs.image;
	let ext = extension(im);
	let dir = (ext==='jpg')?'images/':'videos/';
	if (ext === 'mp4') {
	  imageDiv.style.display = 'none';
		 videoEl.src = dir+im;
	} else {
	  videoDiv.style.display = 'none';
    imageEl.src = dir + im;
  } 
});
</script>
</head
<body style="font-size:14pt;font-family:arial;background-color:gray">
<div class="theGrid">
  <div></div>
  <div id = "titleDiv" style="display: flex;align-items: center;justify-content: center;">
	  HOHO
	</div>
</div>
<div id="imageDiv" class="theGrid">
  <div></div>
  <div style="display: flex;align-items: center;justify-content: center;">
	  <img/ id="theImage">
	</div>
</div>
<div id="videoDiv" class="theGrid">
  <div></div>
  <div style="display: flex;align-items: center;justify-content: center;">
	  <video controls id="theVideo">
      <source type="video/mp4">
		</video>
	</div>
</div>
</body>
</html>